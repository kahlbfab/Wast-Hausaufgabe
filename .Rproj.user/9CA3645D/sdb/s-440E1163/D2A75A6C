{
    "collab_server" : "",
    "contents" : "\n#### Praktikum (Woche 5) - dplyr \n# Foliens√§tze in public folder week 5\n\n#### Preparation\n\n# Install the Packages MASS to use Cars93\ninstall.packages(\"MASS\")\nlibrary(\"MASS\")\n\nlibrary(\"dplyr\")\nrequire(dplyr, quiet = TRUE)\n\n# We use the Cars93 data\ndata(Cars93, package = \"MASS\")\n\n# A brief inspection of the data\nhead(Cars93,3)\n\n# Brief description of the first variables \nsummary(Cars93[1:14])\n\n#### ------------------------------------- ####\n\n#### Local data frame\n\n# We convert the Cars93 (is actual a data.frame) into a local data frame for dplyr\nclass(Cars93)\nCars93 <- tbl_df(Cars93)\nclass(Cars93)\nCars93\n\n\n#### Extracting rows\n\n# Using function slice() you can select rows according to their line number\nslice(Cars93, 1:2) # first two observations\n\n# Function n() returns the number of observations (rows)\nslice(Cars93, n()) # shows the last observation\n\n# Function c() creates a vector from their input numbers\nslice(Cars93, c(1, 4, 10, 15, n())) # select the 1,4,10,15 and last line of the data\n\n\n#### Filtering using a condition\n\n# The function filter() can be selected rows that satisfy a condition\nfilter(Cars93, Manufacturer == \"Audi\" & Min.Price > 25) # all observations where Manufacturer == is Audi and at the same time the value of variable Min.Price > 25 is\n\n\n#### Ordering\n\n# With arrange() you can sort the data by one or more variables \nCars93 <- arrange(Cars93, Price) # order in ascending order\nhead(Cars93, 15)\n\n# Sort by multiple variables\narrange(Cars93, desc(MPG.city), Max.Price) # order in descending order\n\n\n#### Selection of variables\n\n# Function select() allows you to select variables from the data\nhead(select(Cars93, Manufacturer, Price), 3)\n\n# Sequence of variables operator: selectable\nhead(select(Cars93, Manufacturer:Price),3)\n\n\n# Neagative indexing possible, while all variables with letter prefix minus (-) kicked out\nhead(select(Cars93, -Min.Price, -Max.Price),3)\n\n\n# Special function within select \nhead(select(Cars93, starts_with(\"Man\")),2)\n\nhead(select(Cars93, contains(\"Price\")), 2)\n\nhead(select(Cars93, -contains(\"Price\")), 2)\n\n\n#### Renaming variables\n\n## both select() and rename() can be used to rename\n## simple new = old syntax\n\n# select() returns only the specified variables\nhead(select(Cars93, myPrize = Price, Min.Price))\n\n# rename() returns all variables\nhead(rename(Cars93, Manu2 = Manufacturer))\n\n\n#### Uniqueness\n\n# distinct() can be used to keep only unique rows\nCars93_1 <- select(Cars93, Manufacturer, EngineSize)\ndim(Cars93_1)\n\nCars93_1 <- distinct(Cars93_1)\ndim(Cars93_1)\n\ndim(Cars93)\ndim(distinct(Cars93, Manufacturer))\ndim(distinct(Cars93, Manufacturer, EngineSize))\n\n\n#### Creating variables\n\n# mutate() adds new variables are added and retains the old\nm <- mutate(Cars93, is_manu = Manufacturer == \"Ford\")\nm[1:3, c(1,28)]\n\n# transmute() retains only the listed variables\nhead(transmute(Cars93, is_manu = Manufacturer == \"Ford\", Manufacturer),3)\n\n# newly created variables can be used again in the same statement\nhead(transmute(Cars93, Manufacturer, is_manu = Manufacturer == \"Ford\", num = ifelse(is_manu, -1, 1)), 15)\n\n\n#### Grouping and Aggregation\n\n# Grouping by variable Manufacturer and calculation of group size, minimum and maximum of the varibles Prize\nby_type <- group_by(Cars93, Type)\nhead(by_type)\nsummarize(by_type, count = n(), min_es = min(EngineSize), max.es = max(EngineSize))\n\n# Report the first two observation per group\nby_type <- group_by(Cars93, Type)\nslice(by_type, 1:2)\n\n\n#### Pipes\n\n## With the operator %>%, the syntax becomes easily readable\n## Makes it possible to provide commands like in a pipe together\n## Output of the previous is the first input to the command follwing\n\n# Report the first two observation per group\nCars93 %>% group_by(Type) %>% slice(1:2)\n\n# Compute new variable EngineSize as the square of EngineSize and compute for\n# each group the minimum of the new variable. Sort the results in descending order\nCars93 %>% mutate(ES2 = EngineSize^2) %>% group_by(Type) %>% \n  summarize(min.ES2 = min(ES2)) %>% arrange(desc(min.ES2))\n\n\n#### Window Functions\n\n# Calculate cumulative sum and average value within each group\nCars93 %>% group_by(Type) %>% arrange(Type) %>% select(Manufacturer:Price) %>%\n  mutate(cmean = cummean(Price), csum = cumsum(Price))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "created" : 1544778948187.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "768235377",
    "id" : "D2A75A6C",
    "lastKnownWriteTime" : 1540554277,
    "last_content_update" : 1540554277,
    "path" : "~/ZHAW/3. Semester/WAST/Praktikum/Wast_dplyr zusammenfassung.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}